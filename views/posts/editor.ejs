<!DOCTYPE html>
<html>
  <head>
    <title>Verdaemon - Editor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/styles/skeleton.css">
    <link rel="stylesheet" href="/styles/editor.css">
    <link rel="stylesheet" href="/styles/markdown.css">
    <link rel="stylesheet" href="/fonts/opensans/css/all.css">
    <link rel="stylesheet" href="/fonts/fontawesome/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      $(function(){ $("#included-header").load("/html/templates/header.html"); });
      $(function(){ $("#included-footer").load("/html/templates/footer.html"); });
    </script>
  </head>

  <body>
    <header id="included-header"></header>

    <main>
        <section class="content">
          <form action="/posts/editor" method="post" id="post-form" autocomplete="off" spellcheck="true">
            <input name="title" class="title" placeholder="Title" maxlength="128" autofocus required />
            <hr class=rounded>
            <textarea id="body-md" class="body" placeholder="Body" required></textarea>
            <hr class="rounded">
            <input name="tags" class="tags" placeholder="Tags" maxlength="64" />
            <hr class="rounded">

            <!-- form-submitted body HTML -->
            <textarea name="body" id="body-html" hidden></textarea>

            <!-- form-submitted banner -->
            <input name="banner" class="banner" maxlength="256" hidden>
          </form>
        </section>

        <section class="preview">
          <div class="preview-expand">
            <p>Expand Preview</p>
            <i id="expand-caret" class="fas fa-caret-down" style="display: block"></i>
            <i id="retract-caret" class="fas fa-caret-up" style="display: none"></i>
          </div>
          <div class="preview-content markdown-themify" hidden>
            <img id="banner-preview" src="">
            <h1 id="title-preview"></h1>
            <p id="body-preview"></p>
            <h6 id="tags-preview"></h6>
          </div>
        </section>

        <section class="options">
          <div class="options-buttons">
            <input name="banner" id="banner-upload" type="file" accept="image/*" autocomplete="off" hidden />
            <label for="banner-upload">Banner</label>
            <input name="media" id="media-upload" type="file" accept="image/*" autocomplete="off" multiple hidden />
            <label for="media-upload">Image</label>
            <button class="publish-btn" form="post-form">Publish</button>
          </div>
          <div class="options-author">
            <p>Posting as <%= locals.author %></p>
          </div>
        </section>
    </main>

    <footer id="included-footer"></footer>

    <script src="/scripts/editor.js"></script>
    <script src="/scripts/markdown.js" type="module"></script>
  </body>
</html>
